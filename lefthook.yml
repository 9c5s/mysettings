---
pre-commit:
  piped: true
  jobs:
    - name: lefthook validate
      glob: lefthook.yml
      run: uvx lefthook validate
    - name: gitleaks
      run: bunx gitleaks protect --staged --verbose
    - name: shfmt
      glob: '*.{sh,bash}'
      run: bunx shfmt -w {staged_files}
      stage_fixed: true
    - name: shellcheck
      glob: '*.{sh,bash}'
      run: bunx shellcheck {staged_files}
    - name: yamlfix
      glob: '*.{yaml,yml}'
      run: uvx yamlfix {staged_files}
      stage_fixed: true
    - name: yamllint
      glob: '*.{yaml,yml}'
      run: uvx yamllint {staged_files}
    - name: biome
      run: >
        bunx @biomejs/biome@2.1.3 check --write --no-errors-on-unmatched
        --files-ignore-unknown=true {staged_files}
      stage_fixed: true
